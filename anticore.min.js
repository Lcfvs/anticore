/*
 Copyright MIT 2017 Lcf.vs
 https://github.com/Lcfvs/anticore
 */
void function(b,c){"function"==typeof define&&define.amd?define(c.bind(null,b)):"object"==typeof module&&module.exports?module.exports=c(b):b.anticore=c(b)}(Function("return this;")(),function(b){"use strict";function c(I,J){return Object.create(I||null,J)}function e(I,J){return(J||w).querySelectorAll(I)}function f(I){var J=w.createElement("body");return J.innerHTML=I,J}function g(I){(I.offsetWidth||I.offsetHeight||I.getClientRects().length)&&(this.search+="&"+x(("option"===I.nodeName.toLowerCase()?I.parentNode:I).name)+"="+x(I.value).replace(/%20/g,"+"))}function h(I){return G[0].request.originalTarget.classList.toggle("fetching"),I}function i(){G.shift(),G.length&&j()}function j(){var I=G[0];if(!G[1])return h(),z(I.request.url,I.request.options).then(k).then(h).then(l).then(I.trigger||I.request.resolve).then(i).catch(I.reject)}function k(I){var J=((I.headers.get("content-type")||"application/octet-stream").match(/json|html|svg|xml|text(?=\/plain)/)||["blob"])[0],K=G[0];return K.type=J,K.request.response=I,I[-1<H.indexOf(J)?"text":J]()}function l(I){var J=G[0];return J.request.response.result=-1<H.indexOf(J.type)?f(I):I,J.request}function m(I){var J=this.shift();return J?void J[0](J[1],this.next,this.loaded):I&&I()}function n(I){var J=this,K=e(I,J.container);J.selector=I,C(K,o,J)}function o(I){var J=this;J.element=I,C(E[J.selector],p,J)}function p(I){this.push([I,this.element,this.loaded])}function q(I,J){return new Promise(function(K){var L=[];L.container=I,L.loaded=J,C(Object.keys(E),n,L),L.next=m.bind(L,K),L.next()})}function r(I){C(e(".error",I.target),s),D.fetchFromEvent.call({},I)}function s(I){I.parentNode.removeChild(I)}var t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;return t="input[type=submit]:focus,button[type=submit]:focus,button:not([type]):focus",u="input[name]:not([type=file]):not([type=reset]):not([type=submit]):not([type=checkbox]):not([type=radio]):not(:disabled),input[name][type=checkbox]:checked:not(:disabled),input[name][type=radio]:checked:not(:disabled),textarea[name]:not(:disabled),select[name]:not(:disabled) [selected=selected],"+t,v=t+",:not(input):focus,input[type=submit],button[type=submit],button:not([type])",w=b.document,x=b.encodeURIComponent,y=b.URL,z=b.fetch,A=b.FormData,B=Function.bind.bind(Function.call),C=B([].forEach),H=["html","svg","xml"],D=c(),D.fetchers=c(),E=c(),F=c(),G=[],D.fetchers.form=function(I){var L,J=new y(I.action||I.ownerDocument.location.href),K=I.method;return"post"===K?L=new A(I):(J.search+=-1<J.search.indexOf("?")?"":"?",C(e(u,I),g,J)),D.request(J,K,L,I)},D.fetchers.a=function(I){return D.request(I.href,"get",null,I)},D.fetcher=function(I){var J=I.nodeName.toLowerCase();return D.fetchers[J](I)},D.trigger=function(I){return D.onTimeout(I)?D:(q(I.response.result,!0).then(I.resolve).then(function(){return I}),D)},D.on=function(I,J){return E[I]=E[I]||[],0>E[I].indexOf(J)&&E[I].push(J),D},D.onTimeout=function(I){return 408===I.response.status&&(I.retry(),!0)},D.populate=function(I){return q(I||w)},D.request=function(I,J,K,L){var M,N;return M=c(F),N=c(),M.options=N,M.target=L,M.originalTarget=L.parentNode.querySelector(v),M.url=I,N.headers=c(),N.headers["X-Requested-With"]="XMLHttpRequest",N.method=J,N.body=K,M},D.fetchFromEvent=function(I){return this.fetching||(this.fetching=!0,D.fetcher(I.target).fetch(D.trigger)["catch"](D.onError)),I.preventDefault(),!1},D.onError=console.error.bind(console),D.defaults=function(){function I(J){return D.fetchFromEvent.call(c(),J)}return D.on("a:not([download]):not([target]):not([href^=\"data:\"]),a[target=_self]:not([download]):not([href^=\"data:\"])",function(J,K){"ontouchstart"in b&&J.addEventListener("touchend",I),J.addEventListener("click",I),K()}),D.on("form:not([target]),form[target=_self]",function(J,K){J.addEventListener("submit",r),K()}),D},D.plugins=c(),D.utils=c(),D.utils.create=c,D.utils.demethodize=B,D.utils.forEach=C,D.utils.$=function(I,J){return J=J||w,void 0===I?J:J.querySelector(I)},D.utils.$$=e,F.body=function(I,J){return this.options.body.append(I,J),this},F.credentials=function(I){return this.options.credentials=I||"same-origin",this},F.fetch=function(I){var J=c();return J.request=this,G.push(J),new Promise(function(K,L){J.request.resolve=K,J.reject=L,J.trigger=I,j()})},F.retry=function(){return G[0]&&G[0].request===this?(G.unshift(1),G.next(),this):this},F.header=function(I,J){return this.options.headers[I]=J,this},F.option=function(I,J){return this.options[I]=J,this},D});