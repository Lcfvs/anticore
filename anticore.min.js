/*
 Copyright MIT 2017 Lcf.vs
 https://github.com/Lcfvs/anticore
 */
void function(b,c){"function"==typeof define&&define.amd?define(c.bind(null,b)):"object"==typeof module&&module.exports?module.exports=c(b):b.anticore=c(b)}(Function("return this;")(),function(b){"use strict";function c(F,G){return Object.create(F||null,G)}function e(F,G){return(G||t).querySelectorAll(F)}function f(F){var G;return G=t.createElement("body"),G.innerHTML=F,G}function g(F){(F.offsetWidth||F.offsetHeight||F.getClientRects().length)&&(this.search+="&"+u(("option"===F.nodeName.toLowerCase()?F.parentNode:F).name)+"="+u(F.value).replace(/%20/g,"+"))}function h(){D.shift(),D.length&&i()}function i(){var F;if(!D[1])return F=D[0],w(F.request.url,F.request.options).then(j).then(k).then(F.trigger||F.request.resolve).then(h).catch(F.reject)}function j(F){var G,H;return G=((F.headers.get("content-type")||"application/octet-stream").match(/json|html|svg|xml|text(?=\/plain)/)||["blob"])[0],H=D[0],H.type=G,H.request.response=F,F[-1<E.indexOf(G)?"text":G]()}function k(F){var G;return G=D[0],G.request.response.result=-1<E.indexOf(G.type)?f(F):F,G.request}function l(F){var G;return G=this.shift(),G?void G[0](G[1],this.next,this.loaded):F&&F()}function m(F){var G,H;G=this,G.selector=F,H=e(F,G.container),z(H,n,G)}function n(F){var G;G=this,G.element=F,z(B[G.selector],o,G)}function o(F){this.push([F,this.element,this.loaded])}function p(F,G){return new Promise(function(H){var I;I=[],I.container=F,I.loaded=G,z(Object.keys(B),m,I),I.next=l.bind(I,H),I.next()})}function q(F){z(e(".error",F.target),r),A.fetchFromEvent.call({},F)}function r(F){F.parentNode.removeChild(F)}var s,t,u,v,w,x,y,z,A,B,C,D,E;return s="input[name]:not([type=file]):not([type=reset]):not([type=submit]):not([type=checkbox]):not([type=radio]):not(:disabled),input[name][type=submit]:focus,button[name][type=submit]:focus,button[name]:not([type]):focus,input[name][type=checkbox]:checked:not(:disabled),input[name][type=radio]:checked:not(:disabled),textarea[name]:not(:disabled),select[name]:not(:disabled) [selected=selected]",t=b.document,u=b.encodeURIComponent,v=b.URL,w=b.fetch,x=b.FormData,y=Function.bind.bind(Function.call),z=y([].forEach),E=["html","svg","xml"],A=c(),A.fetchers=c(),B=c(),C=c(),D=[],A.fetchers.form=function(F){var I,G=new v(F.action||F.ownerDocument.location.href),H=F.method;return"post"===H?I=new x(F):(G.search+=-1<G.search.indexOf("?")?"":"?",z(e(s,F),g,G)),A.request(G,H,I,F)},A.fetchers.a=function(F){return A.request(F.href,"get",null,F)},A.fetcher=function(F){var G=F.nodeName.toLowerCase();return A.fetchers[G](F)},A.trigger=function(F){return A.onTimeout(F)?A:(p(F.response.result,!0).then(F.resolve).then(function(){return F}),A)},A.on=function(F,G){return B[F]=B[F]||[],0>B[F].indexOf(G)&&B[F].push(G),A},A.onTimeout=function(F){return 408===F.response.status&&(F.retry(),!0)},A.populate=function(F){return p(F||t)},A.request=function(F,G,H,I){var J,K;return J=c(C),K=c(),J.options=K,J.target=I,J.url=F,K.headers=c(),K.headers["X-Requested-With"]="XMLHttpRequest",K.method=G,K.body=H,J},A.fetchFromEvent=function(F){return this.fetching||(this.fetching=!0,A.fetcher(F.target).fetch(A.trigger)["catch"](A.onError)),F.preventDefault(),!1},A.onError=console.error.bind(console),A.defaults=function(){return A.on("a:not([download]):not([target]):not([href^=\"data:\"]),a[target=_self]:not([download]):not([href^=\"data:\"])",function(F,G){var H;H={},"ontouchstart"in b&&F.addEventListener("touchend",A.fetchFromEvent.bind(H)),F.addEventListener("click",A.fetchFromEvent.bind(H)),G()}),A.on("form:not([target]),form[target=_self]",function(F,G){F.addEventListener("submit",q),G()}),A},A.plugins=c(),A.utils=c(),A.utils.create=c,A.utils.demethodize=y,A.utils.forEach=z,A.utils.$=function(F,G){return G=G||t,void 0===F?G:G.querySelector(F)},A.utils.$$=e,C.body=function(F,G){return this.options.body.append(F,G),this},C.credentials=function(F){return this.options.credentials=F||"same-origin",this},C.fetch=function(F){var G;return G=c(),G.request=this,D.push(G),new Promise(function(H,I){G.request.resolve=H,G.reject=I,G.trigger=F,i()})},C.retry=function(){return D[0]&&D[0].request===this?(D.unshift(1),D.next(),this):this},C.header=function(F,G){return this.options.headers[F]=G,this},C.option=function(F,G){return this.options[F]=G,this},A});