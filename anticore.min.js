/*
 Copyright MIT 2017 Lcf.vs
 https://github.com/Lcfvs/anticore
 */
void function(t){'use strict'
function e(){x.shift(),x.length&&n()}function n(){var t
if(!x[1])return t=x[0],f(t.r.url,t.r.options).then(r).then(m).then(o).then(t.trigger).then(e)['catch'](v)}function r(t){var e
return e=x[0],e.r.response=t,t.text()}function o(t){var e
return e=x[0],e.r.response.fragment=t,e.r}function i(){var t
t=this.shift(),t&&t[0](t[1],this.n,this.l)}function s(t){var e,n
e=this,e.s=t,n=e.c.querySelectorAll(t),p(n,u,e)}function u(t){var e
e=this,e.e=t,p(b[e.s],c,e)}function c(t){this.push([t,this.e,this.l])}var h,a,f,d,l,p,m,v,q,g,b,y,x
h=t.document,a=h.createRange(),f=t.fetch,d=t.FormData,l=Function.bind.bind(Function.call),p=l([].forEach),m=l(a.createContextualFragment,a),v=l(console.log,console),q=function(t){return Object.create(t||null)},g=t.anticore=q(),g.fetchers=q(),b=q(),y=q(),x=[],g.fetchers.form=function(t){return g.request(t.action,t.method,new d(t))},g.fetchers.a=function(t){return g.request(t.href,'get')},g.fetcher=function(t){var e
return e=t.nodeName.toLowerCase(),g.fetchers[e](t)},g.trigger=function(t){g.onTimeout(t),setTimeout(g.populate,0,t.response.fragment,!0)},g.on=function(t,e){return b[t]=b[t]||[],b[t].indexOf(e)<0&&b[t].push(e),g},g.onTimeout=function(t){if(408===t.response.status)throw t.retry(),Error()},g.populate=function(t,e){var n
n=[],n.c=t,n.l=e===!0,p(Object.keys(b),s,n),n.n=i.bind(n),n.n()},g.request=function(t,e,n){var r,o
return r=q(y),o=q(),r.options=o,r.url=t,o.headers=q(),o.headers['X-Requested-With']='XMLHttpRequest',o.method=e,o.body=n,r},y.body=function(t,e){return this.options.body.append(t,e),this},y.credentials=function(t){return void 0===t&&(t='same-origin'),this.options.credentials=t,this},y.fetch=function(t){var e
e=q(),e.r=this,e.trigger=t,x.push(e),n()},y.retry=function(){x[0]&&x[0].r===this&&(x.unshift(1),x.n())},y.header=function(t,e){return this.options.headers[t]=e,this},y.option=function(t,e){return this.options[t]=e,this}}(this);